<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qlik Embed Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Content Security Policy - MUST be before Qlik script -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self'; 
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://*.qlikcloud.com https://login.qlik.com; 
        style-src 'self' 'unsafe-inline' https:; 
        img-src 'self' data: https:; 
        font-src 'self' data: https:; 
        connect-src 'self' https://*.qlikcloud.com https://login.qlik.com; 
        frame-src 'self' https://*.qlikcloud.com https://login.qlik.com;
        worker-src 'self' blob:;
    ">

    <!-- Qlik Embed SDK -->
    <!-- data-redirect-uri="http://localhost/embed-test" -->
    <!-- data-redirect-uri="https://embed-test-production.up.railway.app" -->
    <script
        type="application/javascript"
        data-auth-type="Oauth2"
        src="https://unpkg.com/@qlik/embed-web-components"
        data-host="spdatacapacity.de.qlikcloud.com"
        data-client-id="c81b1b3ec8eed9d5b285c398b2c5d05e"
        data-access-token-storage="session"
        data-redirect-uri="https://embed-test-production.up.railway.app"
        data-auto-redirect="true">
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Qlik Embed Dashboard</h1>
        </header>

        <main>
            <section class="visualization-container">
                <h2>Visualization</h2>
                <div id="qlik-object">
                    <qlik-embed
                        id="qlik-embed-object"
                        ui="classic/chart"
                        app-id="20e8a199-3947-471d-b6f1-95a088196a0c"
                        object-id="beba2c07-1274-4869-b3ba-92e9379ce03f">
                    </qlik-embed>
                </div>
            </section>

            <section class="info-container">
                <h3>Connection Details</h3>
                <ul>
                    <li><strong>Tenant:</strong> spdatacapacity.de.qlikcloud.com</li>
                    <li><strong>App ID:</strong> 20e8a199-3947-471d-b6f1-95a088196a0c</li>
                    <li><strong>Object ID:</strong> beba2c07-1274-4869-b3ba-92e9379ce03f</li>
                </ul>
            </section>
        </main>

        <footer>
            <p>Powered by Qlik Embed SDK</p>
        </footer>
    </div>

</body>
</html>
